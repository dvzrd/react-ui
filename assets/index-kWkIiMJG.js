import{R as d,r as a,a as T}from"./index-4g5l5LRQ.js";import{a as O,$ as I,b as h}from"./index-CfqwQvcg.js";import{a as x,$ as E}from"./index-rKN9iO4X.js";import{r as g}from"./index-jmm5gWkb.js";function B(e){const t=e+"CollectionProvider",[r,n]=O(t),[o,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),v=u=>{const{scope:l,children:C}=u,p=d.useRef(null),N=d.useRef(new Map).current;return d.createElement(o,{scope:l,itemMap:N,collectionRef:p},C)},$=e+"CollectionSlot",i=d.forwardRef((u,l)=>{const{scope:C,children:p}=u,N=s($,C),b=x(l,N.collectionRef);return d.createElement(E,{ref:b},p)}),c=e+"CollectionItemSlot",m="data-radix-collection-item",f=d.forwardRef((u,l)=>{const{scope:C,children:p,...N}=u,b=d.useRef(null),S=x(l,b),R=s(c,C);return d.useEffect(()=>(R.itemMap.set(b,{ref:b,...N}),()=>void R.itemMap.delete(b))),d.createElement(E,{[m]:"",ref:S},p)});function A(u){const l=s(e+"CollectionConsumer",u);return d.useCallback(()=>{const p=l.collectionRef.current;if(!p)return[];const N=Array.from(p.querySelectorAll(`[${m}]`));return Array.from(l.itemMap.values()).sort((R,P)=>N.indexOf(R.ref.current)-N.indexOf(P.ref.current))},[l.collectionRef,l.itemMap])}return[{Provider:v,Slot:i,ItemSlot:f},A,n]}function G(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e==null||e(o),r===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function J({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,o]=U({defaultProp:t,onChange:r}),s=e!==void 0,v=s?e:n,$=I(r),i=a.useCallback(c=>{if(s){const f=typeof c=="function"?c(e):c;f!==e&&$(f)}else o(c)},[s,e,o,$]);return[v,i]}function U({defaultProp:e,onChange:t}){const r=a.useState(e),[n]=r,o=a.useRef(n),s=I(t);return a.useEffect(()=>{o.current!==n&&(s(n),o.current=n)},[n,o,s]),r}function _(e,t){return a.useReducer((r,n)=>{const o=t[r][n];return o??r},e)}const y=e=>{const{present:t,children:r}=e,n=D(t),o=typeof r=="function"?r({present:n.isPresent}):a.Children.only(r),s=x(n.ref,o.ref);return typeof r=="function"||n.isPresent?a.cloneElement(o,{ref:s}):null};y.displayName="Presence";function D(e){const[t,r]=a.useState(),n=a.useRef({}),o=a.useRef(e),s=a.useRef("none"),v=e?"mounted":"unmounted",[$,i]=_(v,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const c=M(n.current);s.current=$==="mounted"?c:"none"},[$]),h(()=>{const c=n.current,m=o.current;if(m!==e){const A=s.current,u=M(c);e?i("MOUNT"):u==="none"||(c==null?void 0:c.display)==="none"?i("UNMOUNT"):i(m&&A!==u?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,i]),h(()=>{if(t){const c=f=>{const u=M(n.current).includes(f.animationName);f.target===t&&u&&g.flushSync(()=>i("ANIMATION_END"))},m=f=>{f.target===t&&(s.current=M(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",c),t.addEventListener("animationend",c),()=>{t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",c),t.removeEventListener("animationend",c)}}else i("ANIMATION_END")},[t,i]),{isPresent:["mounted","unmountSuspended"].includes($),ref:a.useCallback(c=>{c&&(n.current=getComputedStyle(c)),r(c)},[])}}function M(e){return(e==null?void 0:e.animationName)||"none"}const L=T.useId||(()=>{});let w=0;function K(e){const[t,r]=a.useState(L());return h(()=>{e||r(n=>n??String(w++))},[e]),e||(t?`radix-${t}`:"")}const k=a.createContext(void 0);function Q(e){const t=a.useContext(k);return e||t||"ltr"}export{G as $,B as a,Q as b,J as c,K as d,y as e};
